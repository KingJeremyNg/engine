!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}));var r=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"keyDown",(function(t){i.input.keys[t.code]=!0})),o(this,"keyUp",(function(t){i.input.keys[t.code]=!1})),o(this,"mouseDown",(function(t){i.input.mouse[t.button]=!0})),o(this,"mouseUp",(function(t){i.input.mouse[t.button]=!1})),o(this,"mouseMove",(function(t){i.input.x=t.clientX+i.offsetX,i.input.y=t.clientY-i.offsetY})),o(this,"startHandler",(function(){i.dynamicEvents={},Object.keys(i.events).forEach(function(t){var e=function(e){this.events[t].forEach(function(t){t.call(this,e)}.bind(this))}.bind(this);this.dynamicEvents[t]=e,this.elem.addEventListener(t,e)}.bind(i))})),o(this,"stopHandler",(function(){Object.keys(i.events).forEach((function(t){i.elem.removeEventListener(t,i.dynamicEvents[t])})),i.dynamicEvents={}})),this.elem=e,this.elemBounds=e.getBoundingClientRect(),this.offsetX=this.elemBounds.left,this.offsetY=this.elemBounds.top,this.input={keys:[],mouse:[],x:0,y:0},this.events={keydown:[this.keyDown],keyup:[this.keyUp],mousedown:[this.mouseDown],mouseup:[this.mouseUp],mousemove:[this.mouseMove]},n&&Object.keys(n).forEach(function(t){var e=this;this.events[t]?this.events[t]=this.events[t].concat(n[t].length?n[t].map((function(t){return t.bind(e)})):[n[t]]):this.events[t]=n[t].length?n[t].map((function(t){return t.bind(e)})):[n[t]]}.bind(this)),this.dynamicEvents={}}var e,n,r;return e=t,(n=[{key:"setEvents",value:function(t){Object.assign(this.events,t)}},{key:"keys",value:function(){return this.input.keys}},{key:"mouse",value:function(){return this.input.mouse}},{key:"mouseX",value:function(){return this.input.x}},{key:"mouseY",value:function(){return this.input.y}}])&&i(e.prototype,n),r&&i(e,r),t}()},,,,function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"render",(function(t){})),o(this,"update",(function(t){})),o(this,"destroy",(function(){n.ctx.clearRect(n.x,n.y,n.width,n.height),n.stage.removeActor(n)})),this.stage,this.ctx,this.bounds=e||{x:0,y:0,width:0,height:0}},u=n(0);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?d(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){function e(t){var n;return c(this,e),y(d(n=a(this,l(e).call(this,t))),"render",(function(){n.ctx.fillStyle="white",n.ctx.fillRect(n.bounds.x,n.bounds.y,n.bounds.width,n.bounds.height)})),n}return f(e,t),e}(r),b=function(t){function e(t){var n;return c(this,e),y(d(n=a(this,l(e).call(this,t))),"render",(function(t){n.ctx.fillStyle="black",n.ctx.fillRect(n.px,n.py,n.bounds.width,n.bounds.height),n.px=Math.round(n.bounds.x),n.py=Math.round(n.bounds.y),n.ctx.fillStyle="#39ff14 ",n.ctx.fillRect(n.px,n.py,n.bounds.width,n.bounds.height)})),y(d(n),"update",(function(t){var e=n.stage.getCollisions(d(n)).find((function(t){return t instanceof p}));e&&(console.log("BOOM"),n.vy>0?n.bounds.y=e.bounds.y-n.bounds.height:n.bounds.y=e.bounds.y+n.bounds.height,n.vy*=-.75),n.vy+=n.ay,n.bounds.y+=n.vy,n.vx+=n.ax,n.bounds.x+=n.vx})),n.bounds.width=10,n.bounds.height=10,n.ay=.05,n.ax=.001,n.vx=0,n.vy=0,n.px=n.bounds.x,n.py=n.bounds.y,n}return f(e,t),e}(r),m=new function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"getCollisions",(function(t){var e=[],i=n;return Object.keys(n.children).forEach((function(n){i.children[n].forEach((function(n){i.checkCollision(n,t)&&n!==t&&e.push(n)}))})),e})),i(this,"checkCollision",(function(t,e){return t.bounds.x<e.bounds.x+e.bounds.width&&t.bounds.x+t.bounds.width>e.bounds.x&&t.bounds.y<e.bounds.y+e.bounds.height&&t.bounds.y+t.bounds.height>e.bounds.y})),i(this,"addActor",(function(t,e){e||(e=0),t.stage=n,t.ctx=n.ctx,t.zIndex=e,n.children[e]||(n.children[e]=[]),n.children[e].push(t)})),i(this,"removeActor",(function(t){var e=n.children[t.zIndex].findIndex((function(e){return e===t}));n.children[t.zIndex].splice(e,1)})),i(this,"callUpdateCycles",(function(){var t=Date.now();t-n.updateTimeStart>1e3/n.updateFPS&&(n.updateDeltaTime=t-n.updateTimeStart,n.updateCycles(n.updateDeltaTime),n.updateTimeStart=Date.now()),window.requestAnimationFrame(n.callUpdateCycles)})),i(this,"callRenderCycles",(function(){var t=Date.now();t-n.renderTimeStart>1e3/n.renderFPS&&(n.renderDeltaTime=t-n.renderTimeStart,n.renderCycles(n.renderDeltaTime),n.renderTimeStart=Date.now()),window.requestAnimationFrame(n.callRenderCycles)})),i(this,"create",(function(){})),i(this,"start",(function(){window.requestAnimationFrame(n.callUpdateCycles),window.requestAnimationFrame(n.callRenderCycles)})),i(this,"stop",(function(){window.cancelAnimationFrame(n.callUpdateCycles),window.cancelAnimationFrame(n.callRenderCycles)})),i(this,"render",(function(){})),i(this,"renderCycles",(function(t){n.render(),n.ctx.clearRect(0,0,n.width,n.height);var e=Object.keys(n.children);e.sort((function(t,e){return t-e})),e.forEach((function(e){this.children[e].forEach((function(e){e.render(.05*t)}),this,t)}),n,t)})),i(this,"update",(function(){})),i(this,"updateCycles",(function(t){n.update();var e=Object.keys(n.children);e.sort((function(t,e){return t-e})),e.forEach((function(e){this.children[e].forEach((function(e){e.update(.05*t)}),this,t)}),n,t)})),this.ticks=0,this.updateFPS=200,this.updateTimeStart=Date.now(),this.updateDeltaTime=0,this.renderFPS=200,this.renderTimeStart=Date.now(),this.renderDeltaTime=0,this.elem=e,e||(this.elem=document.createElement("canvas"),document.querySelector("body").appendChild(this.elem)),this.ctx=this.elem.getContext("2d"),this.children={},this.create()}(document.querySelector("#main")),v=new u.a(document.querySelector("#main"),{mousedown:function(){m.addActor(new b({x:this.input.x,y:this.input.y}),1)}});m.addActor(new p({x:150,y:300,width:300,height:10})),m.addActor(new p({x:50,y:400,width:300,height:10})),m.addActor(new p({x:100,y:500,width:300,height:10})),m.start(),v.startHandler()}]);